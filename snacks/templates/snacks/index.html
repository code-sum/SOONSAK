{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% block content %}
  {% load django_bootstrap5 %}
  <!-- í™œë™ì§€ìˆ˜ top3 -->
  <section class="row justify-content-end">

    <div class="sidebar" style="border-radius: 3%;">
      <!--menu item-->
      <br>
      <h2 style="text-align:center; background-color:#FAD4AE">ì¹´í…Œê³ ë¦¬ ì„ íƒ</h2>
      <div id="catebar"><br><br>
        <!-- ì‚¬ì´ë“œë°” ì¹´í…Œê³ ë¦¬ -->
        {% for category in snack_category %}
          <a href="{% url 'snacks:search' category.category %}" target="">
            <h3 style="text-align:center; ">{{ category.category }}</h3>
          </a><br>
        {% endfor %}
      </div>
    </div>
    <!-- ì‚¬ì´ë“œë°” ì¢…ë£Œ-->

    <div class="col-11">
      <!-- ì¹´í…Œê³ ë¦¬, ì œí’ˆ ë“±ë¡ ì¢…ë£Œ -->
      <br><br>
      <div class="d-flex flex-column text-center border rounded-pill mt-3 mb-5">
        {% if top1 and top2 and top3 %}
          <div class="mt-4">
            <h3>í™œë™ì§€ìˆ˜ Top 3</h3>
          </div>
          <div class="d-flex flex-row justify-content-center">
            <div class="top" style="float: left;">
              <h5><img style="width: 55px;" src="https://i.esdrop.com/d/f/bvRLlOwptP/tmpENG5GoK.png">{{ top1 }}</h5>
            </div>
            <div class="top" style="float: left;">
              <h5><img style="width: 51px;" src="https://i.esdrop.com/d/f/bvRLlOwptP/G8Jl5tvNb6.png">{{ top2 }}</h5>
            </div>
            <div class="top">
              <h5><img style="width: 57px;" src="https://i.esdrop.com/d/f/bvRLlOwptP/NLWUtWp7Jv.png">{{ top3 }}</h5>
            </div>
          </div>
        {% else %}
          <h5>ì•„ì§ í™œë™ì§€ìˆ˜ê°€ ì§‘ê³„ë˜ì§€ ì•Šì•˜ì–´ìš”!</h5>
        {% endif %}
      </div>

      <!-- top6 ìºëŸ¬ì…€ -->
      <div id="carouselExampleIndicators_top6" class="carousel slide mt-5" style="width: 100%; height: 320px;" data-bs-ride="false">
        <h1 class="text-center mb-3">ìˆœì‚­ë­í‚¹ Top 6</h1>
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleIndicators_top6" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators_top6" data-bs-slide-to="1" aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators_top6" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
          <div class="carousel_div">
            <!-- ì°œí•˜ê¸° -->
            <div class="carousel-item active">
              <div class="d-flex justify-content-center">
                <div class="d-flex flex-column">
                  <div class="text-center">
                    <h3>ğŸ† ì‹¤ì‹œê°„ ì¸ê¸° ìƒí’ˆ ğŸ†</h3>
                  </div>
                  <!-- ìºëŸ¬ì…€ ì•„ì´í…œ forë¬¸ -->
                  <div class="d-flex">
                    {% for like in snack_like %}
                      <a href="{% url 'snacks:detail' like.pk %}">
                        {% if like.snack_image %}
                          <img src="{{ like.snack_image.url }}" class="d-block" alt="...">
                        {% else %}
                          <img src="{% static 'images/cookies.png' %}" class="d-block" alt="...">
                        {% endif %}
                        <h5 class="text-center">{{ like.name }}</h5>
                      </a>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
            <!-- ìµœì‹ ìˆœ -->
            <div class="carousel-item">
              <div class="d-flex justify-content-center">
                <div class="d-flex flex-column">
                  <div class="text-center">
                    <h3>ğŸ†• ì‹ ì œí’ˆ ì—…ë°ì´íŠ¸ ğŸ†•</h3>
                  </div>
                  <!-- ìºëŸ¬ì…€ ì•„ì´í…œ forë¬¸ -->
                  <div class="d-flex">
                    {% for new in snack_id %}
                      <a href="{% url 'snacks:detail' new.pk %}">
                        {% if new.snack_image %}
                          <img src="{{ new.snack_image.url }}" class="d-block" alt="...">
                        {% else %}
                          <img src="{% static 'images/cookies.png' %}" class="d-block" alt="...">
                        {% endif %}
                        <h5 class="text-center">{{ new.name }}</h5>
                      </a>
                      {% empty %}
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
            <!-- ë¦¬ë·°ìˆœ -->
            <div class="carousel-item">
              <div class="d-flex justify-content-center">
                <div class="d-flex flex-column">
                  <div class="text-center">
                    <h3>â­ ê°€ì¥ ë§ì€ ë¦¬ë·°ë¥¼ ë°›ì•˜ì–´ìš” â­</h3>
                  </div>
                  <!-- ìºëŸ¬ì…€ ì•„ì´í…œ forë¬¸ -->
                  <div class="d-flex">
                    {% for review in snack_reviews %}
                      <a href="{% url 'snacks:detail' review.pk %}">
                        {% if review.snack_image %}
                          <img src="{{ review.snack_image.url }}" class="d-block" alt="...">
                        {% else %}
                          <img src="{% static 'images/cookies.png' %}" class="d-block" alt="...">
                        {% endif %}
                        <h5 class="text-center">{{ review.name }}</h5>
                      </a>
                      {% empty %}
                      d
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators_top6" data-bs-slide="prev">
          <img src="https://img.icons8.com/plasticine/100/000000/left-squared.png"/>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators_top6" data-bs-slide="next">
          <img src="https://img.icons8.com/plasticine/100/000000/forward.png"/>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
      <!-- ìºëŸ¬ì…€ ì¢…ë£Œ -->

      <!-- ìƒí’ˆ ë°°ì¹˜ ë° ë””í´íŠ¸ ì²˜ë¦¬ -->
      <div class="container mt-5">
        <div class="row">
          {% for snack in snacks %}
            <div class="col-4 p-5 d-flex">
              <!-- ìƒí’ˆ ì¹´ë“œ -->
              <a href="{% url 'snacks:detail' snack.pk %}">
                {% if snack.snack_image %}
                  <div class="banner_img">
                    <img src="{{ snack.snack_image.url }}" class="card-img-top" alt="ìŠ¤ë‚µì´ë¯¸ì§€">
                  </div>
                {% else %}
                  <div class="banner_img">
                    <img class="profile" style="width:100%; height:300px;" src="https://i.esdrop.com/d/t/bvRLlOwptP/2jK4vs4YjI.jpg" alt="ìŠ¤ë‚µë””í´íŠ¸">
                  </div>
                {% endif %}
                <h3 class="card-text" style="position:static; text-align:center; margin:5px; text-decoration:none; color:black; margin-top: 12px;">
                  <span class="badge badge-primary" style="margin-right:10px;padding:5px;font-size:25px">
                    {{ snack.category }}</span>{{snack.name}}
                </h3>
                <div class="card-text a_title" style="text-align:center; text-decoration:none; color:black; font-size:20px;">
                  {{snack.price|intcomma}}ì›
                  {% if 10 >= snack.stock %}
                    <h4 class="badge badge-secondary" style="padding:5px;font-size:18px">í’ˆì ˆì„ë°•</h4>
                  {% endif %}
                </div>
              </a>
            </div>
          {% endfor %}
        </div>
      </div>
      <!-- ìƒí’ˆ ë°°ì¹˜ ë° ë””í´íŠ¸ ì²˜ë¦¬ ì¢…ë£Œ -->
    </div>
  </section>

{% endblock %}